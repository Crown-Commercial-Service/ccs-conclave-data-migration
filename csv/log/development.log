DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from block (2 levels) in <class:Railtie> at /home/tom/.rvm/gems/ruby-3.2.2/gems/activerecord-7.0.7.2/lib/active_record/railtie.rb:264)
Started POST "/data-migration/migrate/format/csv" for ::1 at 2023-09-27 12:04:54 +0100
DEPRECATION WARNING: Non-URL-safe CSRF tokens are deprecated. Use 6.1 defaults or above. (called from <main> at /home/tom/Java/ccs-conclave-data-migration/csv/app/controllers/application_controller.rb:1)
Processing by DataMigrationController#migrate as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007f70c0d53440 @tempfile=#<Tempfile:/tmp/RackMultipart20230927-8780-68z4vc.csv>, @content_type="text/csv", @original_filename="testingDMs-1605.csv", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"testingDMs-1605.csv\"\r\nContent-Type: text/csv\r\n">}
Completed 401 Unauthorized in 7ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 4209)


Started POST "/data-migration/migrate/format/csv" for ::1 at 2023-09-27 12:06:48 +0100
Processing by DataMigrationController#migrate as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007f70c3c44420 @tempfile=#<Tempfile:/tmp/RackMultipart20230927-8780-ttivk6.csv>, @content_type="text/csv", @original_filename="testingDMs-1605.csv", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"testingDMs-1605.csv\"\r\nContent-Type: text/csv\r\n">}
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 170)


Started POST "/data-migration/migrate/format/csv" for ::1 at 2023-09-27 12:07:07 +0100
Processing by DataMigrationController#migrate as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007f70c3d1e260 @tempfile=#<Tempfile:/tmp/RackMultipart20230927-8780-8dx50.csv>, @content_type="text/csv", @original_filename="testingDMs-1605.csv", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"testingDMs-1605.csv\"\r\nContent-Type: text/csv\r\n">}
Completed 500 Internal Server Error in 165ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 2507)


  
AbstractController::DoubleRenderError (Render and/or redirect were called multiple times in this action. Please note that you may only call render OR redirect, and at most once per action. Also note that neither redirect nor render terminate execution of the action, so if you want to exit an action after redirecting, you need to do something like "redirect_to(...) and return".):
  
app/controllers/data_migration_controller.rb:116:in `send_to_data_migration'
app/controllers/data_migration_controller.rb:60:in `migrate'
Started POST "/data-migration/migrate/format/csv" for ::1 at 2023-09-27 12:08:08 +0100
Processing by DataMigrationController#migrate as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007f70c0923f28 @tempfile=#<Tempfile:/tmp/RackMultipart20230927-8780-vkrcfp.csv>, @content_type="text/csv", @original_filename="testingDMs-1605.csv", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"testingDMs-1605.csv\"\r\nContent-Type: text/csv\r\n">}
Completed 401 Unauthorized in 84ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 1111)


Started POST "/data-migration/migrate/format/csv" for ::1 at 2023-09-27 12:09:49 +0100
Processing by DataMigrationController#migrate as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007f70c3d67aa0 @tempfile=#<Tempfile:/tmp/RackMultipart20230927-8780-g1pvaw.csv>, @content_type="text/csv", @original_filename="testingDMs-1605.csv", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"testingDMs-1605.csv\"\r\nContent-Type: text/csv\r\n">}
Completed 200 OK in 89ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 1136)


Started POST "/data-migration/migrate/format/csv" for ::1 at 2023-09-27 12:10:58 +0100
Processing by DataMigrationController#migrate as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007f70c0929888 @tempfile=#<Tempfile:/tmp/RackMultipart20230927-8780-my9g5k.csv>, @content_type="text/csv", @original_filename="testingDMs-1605.csv", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"testingDMs-1605.csv\"\r\nContent-Type: text/csv\r\n">}
Completed 200 OK in 98ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 1105)


Started POST "/data-migration/migrate/format/csv" for ::1 at 2023-09-27 12:12:39 +0100
Processing by DataMigrationController#migrate as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007f70c09bd808 @tempfile=#<Tempfile:/tmp/RackMultipart20230927-8780-nxmuc6.csv>, @content_type="text/csv", @original_filename="testingDMs-1605.csv", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"testingDMs-1605.csv\"\r\nContent-Type: text/csv\r\n">}
Completed 200 OK in 97ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 1113)


Started POST "/data-migration/migrate/format/csv" for ::1 at 2023-09-27 12:19:20 +0100
Processing by DataMigrationController#migrate as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007f70c0b02a88 @tempfile=#<Tempfile:/tmp/RackMultipart20230927-8780-djwa2r.csv>, @content_type="text/csv", @original_filename="testingDMs-1605.csv", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"testingDMs-1605.csv\"\r\nContent-Type: text/csv\r\n">}
Completed 422 Unprocessable Entity in 102ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 1131)


Started POST "/data-migration/migrate/format/csv" for ::1 at 2023-09-27 12:21:14 +0100
Processing by DataMigrationController#migrate as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007f70c0da7f90 @tempfile=#<Tempfile:/tmp/RackMultipart20230927-8780-ui0mly.csv>, @content_type="text/csv", @original_filename="testingDMs-1605.csv", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"testingDMs-1605.csv\"\r\nContent-Type: text/csv\r\n">}
Completed 200 OK in 92ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 1142)


Started POST "/data-migration/migrate/format/csv" for ::1 at 2023-09-27 12:21:57 +0100
Processing by DataMigrationController#migrate as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007f70c0da2680 @tempfile=#<Tempfile:/tmp/RackMultipart20230927-8780-fg022g.csv>, @content_type="text/csv", @original_filename="testingDMs-1605IIIIII.csv", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"testingDMs-1605IIIIII.csv\"\r\nContent-Type: text/csv\r\n">}
Completed 400 Bad Request in 457ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 1535)


Started POST "/data-migration/migrate/format/csv" for ::1 at 2023-09-27 12:22:13 +0100
Processing by DataMigrationController#migrate as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007f70c092b9f8 @tempfile=#<Tempfile:/tmp/RackMultipart20230927-8780-4t8h2p.csv>, @content_type="text/csv", @original_filename="testingDM_ULT.csv", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"testingDM_ULT.csv\"\r\nContent-Type: text/csv\r\n">}
Completed 200 OK in 70ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 1022)


Started POST "/data-migration/migrate/format/csv" for ::1 at 2023-09-27 12:22:54 +0100
Processing by DataMigrationController#migrate as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007f70c09bf568 @tempfile=#<Tempfile:/tmp/RackMultipart20230927-8780-cznyyi.csv>, @content_type="text/csv", @original_filename="testingDM_ULT.csv", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"testingDM_ULT.csv\"\r\nContent-Type: text/csv\r\n">}
Completed 200 OK in 87ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 1166)


Started POST "/data-migration/migrate/format/csv" for ::1 at 2023-09-27 12:24:17 +0100
Processing by DataMigrationController#migrate as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007f70c0a43f70 @tempfile=#<Tempfile:/tmp/RackMultipart20230927-8780-yisgbz.csv>, @content_type="text/csv", @original_filename="testingDM_ULT.csv", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"testingDM_ULT.csv\"\r\nContent-Type: text/csv\r\n">}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms | Allocations: 498)


  
NameError (undefined local variable or method `row' for #<DataMigrationController:0x00000000014d98>):
  
app/controllers/data_migration_controller.rb:28:in `migrate'
Started POST "/data-migration/migrate/format/csv" for ::1 at 2023-09-27 12:25:27 +0100
Processing by DataMigrationController#migrate as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007f70c0a40870 @tempfile=#<Tempfile:/tmp/RackMultipart20230927-8780-ln9ckv.csv>, @content_type="text/csv", @original_filename="testingDM_ULT.csv", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"testingDM_ULT.csv\"\r\nContent-Type: text/csv\r\n">}
Completed 200 OK in 110ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 1339)


